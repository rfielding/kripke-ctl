<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Producer-Consumer CTL Analysis</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 40px auto;
            padding: 0 20px;
            line-height: 1.6;
            background: #f5f5f5;
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        h2 {
            color: #34495e;
            margin-top: 40px;
            border-left: 4px solid #3498db;
            padding-left: 15px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #3498db;
            color: white;
            font-weight: 600;
        }
        tr:hover {
            background-color: #f5f5f5;
        }
        .pass {
            color: #27ae60;
            font-weight: bold;
        }
        .fail {
            color: #e74c3c;
            font-weight: bold;
        }
        .section {
            background: white;
            padding: 30px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .metric {
            display: inline-block;
            background: #ecf0f1;
            padding: 10px 20px;
            margin: 10px 10px 10px 0;
            border-radius: 5px;
            font-weight: 600;
        }
        .mermaid {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        code {
            background: #ecf0f1;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        .summary {
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
            padding: 20px;
            margin: 20px 0;
            border-radius: 4px;
        }
    </style>
</head>
<body>
<h1>Producer-Consumer: Complete Analysis Report</h1>
<p><strong>Generated:</strong> 2025-12-10 05:18:58</p>
<p><strong>Tool:</strong> kripke-ctl (CTL model checker + actor engine)</p>
<div class="section">
<h2>1. System Description</h2>
<p>A producer-consumer system with bounded buffer:</p>
<ul>
    <li><strong>Producer:</strong> Creates items and sends them to consumer's inbox</li>
    <li><strong>Consumer:</strong> Receives items from inbox and processes them</li>
    <li><strong>Buffer:</strong> FIFO channel with capacity = 2</li>
    <li><strong>Blocking:</strong> Producer waits when full, consumer waits when empty</li>
</ul>
</div>
<div class="section"><h2>2. Engine Execution</h2><p>Running actor engine for 20 steps...</p>
<table>
<tr>
    <th>Step</th>
    <th>Time</th>
    <th>Action</th>
    <th>Buffer Size</th>
    <th>Events</th>
</tr>
<tr><td>1</td><td>1</td><td>produce</td><td>1</td><td>0</td></tr>
<tr><td>2</td><td>2</td><td>consume</td><td>0</td><td>1</td></tr>
<tr><td>3</td><td>3</td><td>produce</td><td>1</td><td>1</td></tr>
<tr><td>4</td><td>4</td><td>produce</td><td>2</td><td>1</td></tr>
<tr><td>5</td><td>5</td><td>consume</td><td>1</td><td>2</td></tr>
<tr><td>6</td><td>6</td><td>consume</td><td>0</td><td>3</td></tr>
<tr><td>7</td><td>7</td><td>produce</td><td>1</td><td>3</td></tr>
<tr><td>8</td><td>8</td><td>produce</td><td>2</td><td>3</td></tr>
<tr><td>9</td><td>9</td><td>consume</td><td>1</td><td>4</td></tr>
<tr><td>10</td><td>10</td><td>consume</td><td>0</td><td>5</td></tr>
<tr><td>11</td><td>11</td><td>produce</td><td>1</td><td>5</td></tr>
<tr><td>12</td><td>12</td><td>consume</td><td>0</td><td>6</td></tr>
<tr><td>13</td><td>13</td><td>produce</td><td>1</td><td>6</td></tr>
<tr><td>14</td><td>14</td><td>produce</td><td>2</td><td>6</td></tr>
<tr><td>15</td><td>15</td><td>consume</td><td>1</td><td>7</td></tr>
<tr><td>16</td><td>16</td><td>consume</td><td>0</td><td>8</td></tr>
<tr><td>17</td><td>17</td><td>produce</td><td>1</td><td>8</td></tr>
<tr><td>18</td><td>18</td><td>consume</td><td>0</td><td>9</td></tr>
<tr><td>19</td><td>19</td><td>produce</td><td>1</td><td>9</td></tr>
<tr><td>20</td><td>20</td><td>produce</td><td>2</td><td>9</td></tr>
</table></div>
<div class="section"><h2>3. Event Log Analysis</h2><div class="metric">Total messages: 9</div><div class="metric">Avg queue delay: 1.67 ticks</div><div class="metric">Max queue delay: 2 ticks</div><div class="metric">Consumer processed: 9 items</div><h3>Event Timeline (First 10 Events)</h3>
<div class="mermaid">
sequenceDiagram
    participant P as Producer
    participant B as Buffer
    participant C as Consumer
    P->>B: send (t=0)
    B->>C: recv (t=1, delay=1)
    P->>B: send (t=2)
    B->>C: recv (t=4, delay=2)
    P->>B: send (t=3)
    B->>C: recv (t=5, delay=2)
    P->>B: send (t=6)
    B->>C: recv (t=8, delay=2)
    P->>B: send (t=7)
    B->>C: recv (t=9, delay=2)
    P->>B: send (t=10)
    B->>C: recv (t=11, delay=1)
    P->>B: send (t=12)
    B->>C: recv (t=14, delay=2)
    P->>B: send (t=13)
    B->>C: recv (t=15, delay=2)
    P->>B: send (t=16)
    B->>C: recv (t=17, delay=1)
</div>
</div>
<div class="section"><h2>4. State Space Model</h2><p><strong>States:</strong> 3</p>
<p><strong>Transitions:</strong> 4</p>
<h3>State Descriptions</h3><ul>
<li><strong>buffer_0:</strong> empty, P:ready</li>
<li><strong>buffer_1:</strong> P:ready, C:ready</li>
<li><strong>buffer_2:</strong> full, C:ready</li>
</ul>
<h3>State Diagram</h3>
<div class="mermaid">
stateDiagram-v2
    [*] --> buffer_0

    buffer_1 --> buffer_2: produce
    buffer_1 --> buffer_0: consume
    buffer_2 --> buffer_1: consume
    buffer_0 --> buffer_1: produce

    buffer_0: Empty\nP:ready C:blocked
    buffer_1: Partial\nP:ready C:ready
    buffer_2: Full\nP:blocked C:ready
</div>
</div>
<div class="section"><h2>5. CTL Property Verification</h2><table>
<tr>
    <th>Property</th>
    <th>Formula</th>
    <th>Result</th>
    <th>Description</th>
</tr>
<tr><td>Safety</td><td><code>AG(¬overflow)</code></td><td><span class="pass">✅ PASS</span></td><td>Buffer never overflows</td></tr>
<tr><td>Liveness-P</td><td><code>AG(EF(producer_ready))</code></td><td><span class="pass">✅ PASS</span></td><td>Producer can always eventually send</td></tr>
<tr><td>Liveness-C</td><td><code>AG(EF(consumer_ready))</code></td><td><span class="pass">✅ PASS</span></td><td>Consumer can always eventually receive</td></tr>
<tr><td>No-Deadlock</td><td><code>AG(P ∨ C)</code></td><td><span class="pass">✅ PASS</span></td><td>At least one actor can always progress</td></tr>
<tr><td>Reachable-Full</td><td><code>EF(full)</code></td><td><span class="pass">✅ PASS</span></td><td>Buffer can become full</td></tr>
<tr><td>Reachable-Empty</td><td><code>EF(empty)</code></td><td><span class="pass">✅ PASS</span></td><td>Buffer can become empty</td></tr>
</table></div>
<div class="summary">
<h2>6. Conclusion</h2>
<p><strong>Verification Summary:</strong> 6/6 properties verified successfully</p>
<h3>Key Findings</h3>
<ol>
    <li>✅ <strong>Safety:</strong> The buffer never overflows (capacity constraint respected)</li>
    <li>✅ <strong>Liveness:</strong> Both producer and consumer can always make progress eventually</li>
    <li>✅ <strong>Deadlock-freedom:</strong> The system never reaches a state where no progress is possible</li>
    <li>✅ <strong>Reachability:</strong> All possible buffer states (empty, partial, full) are reachable</li>
</ol>
<h3>Performance Metrics</h3><ul><li>Average queue delay: <strong>1.67 ticks</strong></li>
<li>Messages processed: <strong>9</strong></li>
</ul>
</div>

<script>
    mermaid.initialize({ startOnLoad: true, theme: 'default' });
</script>
</body>
</html>
